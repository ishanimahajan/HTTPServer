"use strict";void 0===window.console&&(window.console={log:function(){},debug:function(){}}),void 0===window.localStorage&&(window.localStorage={getItem:function(){},setItem:function(){}}),"undefined"==typeof JSON&&(JSON={stringify:function(){},parse:function(){}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var n=this.length>>>0,t=Number(arguments[1])||0;for(t=t<0?Math.ceil(t):Math.floor(t),t<0&&(t+=n);t<n;t++)if(t in this&&this[t]===e)return t;return-1}),"function"!=typeof Object.assign&&(Object.assign=function(e,n){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var a=arguments[i];if(null!=a)for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t}),Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,n=!{toString:null}.propertyIsEnumerable("toString"),t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=t.length;return function(a){if("object"!=typeof a&&("function"!=typeof a||null===a))throw new TypeError("Object.keys called on non-object");var o,s,r=[];for(o in a)e.call(a,o)&&r.push(o);if(n)for(s=0;i>s;s++)e.call(a,t[s])&&r.push(t[s]);return r}}()),Array.prototype.some||(Array.prototype.some=function(e){if(null==this)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof e)throw new TypeError;for(var n=Object(this),t=n.length>>>0,i=arguments.length>=2?arguments[1]:void 0,a=0;a<t;a++)if(a in n&&e.call(i,n[a],a,n))return!0;return!1});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function i(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();window.Demandbase=window.Demandbase||{},window.Demandbase.Config=window.Demandbase.Config||{},window.Demandbase.Config.hooks=window.Demandbase.Config.hooks||{},window.Demandbase.Config.ads=window.Demandbase.Config.ads||{},window.Demandbase.Config.analytics=window.Demandbase.Config.analytics||{},window.Demandbase.Config.tokens=window.Demandbase.Config.tokens||{},window.Demandbase.Config.forms=window.Demandbase.Config.forms||{},window.Demandbase.Connectors=window.Demandbase.Connectors||{};var Demandbase;!function(e){e.version="5.0.1"}(Demandbase||(Demandbase={}));var Demandbase;!function(e){!function(e){!function(e){function n(e){return void 0!==e.stacktrace||void 0!==e["opera#sourceloc"]?this.parseOpera(e):e.stack&&e.stack.match(c)?this.parseV8OrIE(e):e.stack?this.parseFFOrSafari(e):void 0}function t(e){if(-1===e.indexOf(":"))return[e];var n=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/,t=n.exec(e.replace(/[\(\)]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]}function i(e,n){if(void 0===n&&(n=10),e)return parseInt(e,n)}function a(e){return e.stack.split("\n").filter(function(e){return!!e.match(c)},this).map(function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var n=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),t=this.extractLocation(n.pop());return{function:n.join(" ")||void 0,file:["eval","<anonymous>"].indexOf(t[0])>-1?void 0:t[0],line:this._parseInt(t[1]),column:this._parseInt(t[2])}},this)}function o(e){return e.stack.split("\n").filter(function(e){return!e.match(m)},this).map(function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return{function:e};var n=e.split("@"),t=this.extractLocation(n.pop());return{function:n.join("@")||void 0,file:t[0],line:this._parseInt(t[1]),column:this._parseInt(t[2])}},this)}function s(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)}function r(e){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,t=e.message.split("\n"),i=[],a=2,o=t.length;a<o;a+=2){var s=n.exec(t[a]);s&&i.push({file:s[2],line:this._parseInt(s[1])})}return i}function d(e){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,t=e.stacktrace.split("\n"),i=[],a=0,o=t.length;a<o;a+=2){var s=n.exec(t[a]);s&&i.push({function:s[3]||void 0,file:s[2],line:this._parseInt(s[1])})}return i}function l(e){return e.stack.split("\n").filter(function(e){return!!e.match(u)&&!e.match(/^Error created at/)},this).map(function(e){var n,t=e.split("@"),i=this.extractLocation(t.pop()),a=t.shift()||"",o=a.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;return a.match(/\(([^\)]*)\)/)&&(n=a.replace(/^[^\(]+\(([^\)]*)\)$/,"$1")),void 0===n||"[arguments not available]"===n||n.split(","),{function:o,file:i[0],line:this._parseInt(i[1]),column:this._parseInt(i[2])}},this)}var u=/(^|@)\S+\:\d+/,c=/^\s*at .*(\S+\:\d+|\(native\))/m,m=/^(eval@)?(\[native code\])?$/;e.parse=n,e.extractLocation=t,e._parseInt=i,e.parseV8OrIE=a,e.parseFFOrSafari=o,e.parseOpera=s,e.parseOpera9=r,e.parseOpera10=d,e.parseOpera11=l}(e.ErrorStackParser||(e.ErrorStackParser={}))}(e.Utilities||(e.Utilities={}))}(Demandbase||(Demandbase={}));var Demandbase;!function(e){!function(n){!function(t){function i(e){var n={referrer:document.referrer,page:document.URL,page_title:document.title};if(window.Demandbase.Config.isInIFrame){n.page=document.referrer;try{n.referrer=window.top.document.referrer,n.page_title=window.top.document.title}catch(e){n.referrer=null,n.page_title="3rd Party iFrame"}}return n=Object.assign(n,e),o(n)}function a(t,a){var o=t||n.Constants.URL_IP_API;return o+=i(a),e.ExtendedCompanyTargeting&&(o+=e.ExtendedCompanyTargeting.buildParamString()),o}function o(e){var n="?";for(var t in e)e.hasOwnProperty(t)&&void 0!==e[t]&&(n+=t+"="+encodeURIComponent(e[t])+"&");return n=n.substring(0,n.length-1)}t.buildApiParamString=i,t.buildApiUrl=a,t.buildQueryString=o}(n.Api||(n.Api={}))}(e.Utilities||(e.Utilities={}))}(Demandbase||(Demandbase={})),function(e){e.Demandbase.utils=e.Demandbase.utils||{},Object.assign(e.Demandbase.utils,e.Demandbase.utils,{buildApiParamString:Demandbase.Utilities.Api.buildApiParamString,buildApiUrl:Demandbase.Utilities.Api.buildApiUrl,buildQueryString:Demandbase.Utilities.Api.buildQueryString})}(window);var Demandbase;!function(e){!function(n){!function(n){function t(t){for(var i=0;i<n.callbackStack.length;i++)!function(i){var a=n.callbackStack[i];e.ErrorReporter.wrap(function(){a.call(window.Demandbase,t)})()}(i)}function i(t){-1===n.callbackStack.indexOf(t)&&(n.callbackStack.push(t),window.Demandbase.IP.CompanyProfile&&e.ErrorReporter.wrap(function(){t.call(window.Demandbase,window.Demandbase.IP.CompanyProfile)})())}n.callbackStack=[],n.callback=t,n.registerCallback=i}(n.Callbacks||(n.Callbacks={}))}(e.Utilities||(e.Utilities={}))}(Demandbase||(Demandbase={})),function(e){e.Demandbase.utils=e.Demandbase.utils||{},Object.assign(e.Demandbase.utils,e.Demandbase.utils,{callback:Demandbase.Utilities.Callbacks.callback.bind(Demandbase.Utilities.Callbacks),registerCallback:Demandbase.Utilities.Callbacks.registerCallback.bind(Demandbase.Utilities.Callbacks)})}(window);var Demandbase;!function(e){!function(e){!function(e){e.QS_USE_TEST_DOMAIN="db_useTestDomain",e.QS_QUERY_DOMAIN="db_domain",e.QS_ENABLE_LOG="db_logging",e.QS_ENABLE_DEBUG="db_debug",e.QS_ENABLE_TEST_MODE="db_testMode",e.TEST_MODE_NAME="dbtme",e.DFLT_NON_COMPANY="(Non-Company Visitor)",e.DFLT_AW_EMPTY="(AccountWatch Empty)",e.DFLT_NON_AW="(Non-AccountWatch Visitor)",e.DFLT_EVENT_TYPE="click",e.URL_IP_API="api.demandbase.com/api/v2/ip.json",e.URL_DOMAIN_API="api.demandbase.com/api/v1/domain.json",e.URL_AD_PIXEL=window.Demandbase.Config.tokens.URL_AD_PIXEL||"d.company-target.com/pixel?type=js&id=",e.URL_CURRENT=function(){var e=document.URL;return window.Demandbase.Config.isInIFrame&&(e=document.referrer),e=encodeURIComponent(e)}(),e.PROTOCOL=function(){return"https:"==document.location.protocol?"https://":"http://"}()}(e.Constants||(e.Constants={}))}(e.Utilities||(e.Utilities={}))}(Demandbase||(Demandbase={})),function(e){e.Demandbase.utils=e.Demandbase.utils||{},Object.assign(e.Demandbase.utils,e.Demandbase.utils,{tokens:Demandbase.Utilities.Constants})}(window);var Demandbase;!function(e){!function(e){var n=function(){function e(e){void 0===e&&(e={}),this.ssid=e.ssid||null,this.tuuid=e.tuuid||null,this.createdAt=e.createdAt||new Date,this.updatedAt=e.updatedAt||new Date}return e.fetch=function(){return this.fromJSON(localStorage.getItem("DemandbaseDataStorage")||"{}")},e.fromJSON=function(n){void 0===n&&(n="{}");var t=JSON.parse(n),i=new Date,a=new Date;return t.createdAt&&(i=new Date(t.createdAt)),t.updatedAt&&(a=new Date(t.updatedAt)),new e({ssid:t.ssid,tuuid:t.tuuid,createdAt:i,updatedAt:a})},e.prototype.toJSON=function(){return JSON.stringify({ssid:this.ssid,tuuid:this.tuuid,createdAt:this.createdAt.toJSON(),updatedAt:this.updatedAt.toJSON()})},e.update=function(n){void 0===n&&(n={}),e.fetch().update(n)},e.prototype.update=function(e){void 0===e&&(e={}),this.ssid=e.ssid,this.tuuid=e.tuuid,this.updatedAt=new Date,this.save()},e.prototype.save=function(){localStorage.setItem("DemandbaseDataStorage",this.toJSON())},e.prototype.isStale=function(){var e=new Date((new Date).setDate((new Date).getDate()-30));return this.updatedAt<=e},e}();e.DataStorage=n}(e.Utilities||(e.Utilities={}))}(Demandbase||(Demandbase={}));var Demandbase;!function(e){var n=function(){function n(n){void 0===n&&(n={}),this.name=n.name||"",this.modify=n.modify||null,this.segments=n.segments||[],this.url=n.url||[],this.modify||(this.modify=function(){e.Utilities.Logging.log("DBContent: modify function not defined")}),"string"==typeof this.segments&&(this.segments=[this.segments]),"string"==typeof this.url&&(this.url=[this.url])}return n.prototype.run=function(){var n=!1;for(var t in this.url)if(this.url.hasOwnProperty(t)){var i=this.url[t];window.Demandbase.utils.isCurrentPage(i)&&(n=!0)}if(n){var a=!1;for(var t in this.segments)if(this.segments.hasOwnProperty(t)){var o=this.segments[t],s=window.Demandbase.Segments[o];void 0!==s&&s&&(a=!0)}return a?(e.Utilities.Logging.log("DBContent: running modify function for: "+this.name),this.modify.call(document),!0):(e.Utilities.Logging.log("DBContent modify "+this.name+" not fired.  Segment "+o),!1)}return e.Utilities.Logging.log("DBContent modify "+this.name+" not fired. no URL match with: "+this.url),!1},n}();e.DBContent=n}(Demandbase||(Demandbase={}));var Demandbase;!function(e){!function(n){function t(n){if(!n)return!1;var t=["name","segments","pages","modify"];if("function"!=typeof n.modify)return e.Utilities.Logging.log("DBContentBuilder: invalid type in config."),!1;for(var i=0;i<t.length;i++)if(void 0===n[t[i]])return e.Utilities.Logging.log("DBContentBuilder: invalid config missing: "+t[i]),!1;return!0}function i(n){return t(n)?("string"==typeof n.pages?n.url=[n.pages]:n.url=n.pages,"string"==typeof n.segments&&(n.segments=[n.segments]),new e.DBContent(n)):null}n.isValid=t,n.build=i}(e.DBContentBuilder||(e.DBContentBuilder={}))}(Demandbase||(Demandbase={}));var Demandbase;!function(e){!function(n){!function(t){function i(t){var i=!0;if(!o(t))return n.Logging.log("Event not added."),!1;var s=t.type||window.Demandbase.utils.tokens.DFLT_EVENT_TYPE,r=t.elements,d=r.constructor;if(d!==HTMLCollection&&d!==NodeList)return a(t.elements,s,t.listener);for(var l in r){r.hasOwnProperty(l)&&(a(r[l],s,t.listener)||(i=!1,e.Utilities.Logging.log("Event not added to"+r[l])))}return i}function a(e,t,i){return e?(e.jquery&&(e=e[0]),n.addEventListener(e,t,i),n.Logging.log("Event Listener bind to: "+e+" on event "+t),!0):(n.Logging.log("Event not registered - invalid element/s."),null)}function o(n){for(var t=!1,i=["elements","listener"],a=n.elements||null,o=n.listener||null,s=(window.Demandbase.utils,0);s<i.length;s++)if(void 0===n[i[s]]||!n[i[s]])return e.Utilities.Logging.log("Invalid Event object. Missing: "+i[s]),!1;return"function"!=typeof o?(e.Utilities.Logging.log('Invalid Event: "listener" must be a function. Got ('+o+")"),!1):(a instanceof Node||a instanceof NodeList||a instanceof HTMLElement||a instanceof HTMLCollection||a instanceof Window||a instanceof Document||"function"==typeof a||void 0!==window.Demandbase.jQuery&&a instanceof window.Demandbase.jQuery?t=!0:e.Utilities.Logging.log("Invalid Event:  element: "+a+' has type: "'+a.constructor+'" which is not proper instance type.'),t)}t.add=i,t._attachListener=a,t.isValid=o}(n.Events||(n.Events={}))}(e.Utilities||(e.Utilities={}))}(Demandbase||(Demandbase={})),function(e){e.Demandbase.utils=e.Demandbase.utils||{},Object.assign(e.Demandbase.utils,e.Demandbase.utils,{events:Demandbase.Utilities.Events})}(window);var Demandbase;!function(e){!function(n){!function(t){function i(e){a(e)}function a(t){(e.Config.logging||"true"===n.getQueryParam(n.Constants.QS_ENABLE_LOG))&&console.log("DB: "+t)}t.logging=!1,t.debug=!1,t.alert=i,t.log=a}(n.Logging||(n.Logging={}))}(e.Utilities||(e.Utilities={}))}(Demandbase||(Demandbase={})),function(e){e.Demandbase.utils=e.Demandbase.utils||{},Object.assign(e.Demandbase.utils,e.Demandbase.utils,{logging:Demandbase.Utilities.Logging.logging,debug:Demandbase.Utilities.Logging.debug,alert:Demandbase.Utilities.Logging.alert.bind(Demandbase.Utilities.Logging),log:Demandbase.Utilities.Logging.log.bind(Demandbase.Utilities.Logging)})}(window);var Demandbase;!function(e){!function(e){function n(e){return document.getElementById(e)||document.getElementsByName(e)[0]||null}function t(){return window.top!==window.self}function i(e,n){if(e&&(window.Demandbase._loadedScripts=window.Demandbase._loadedScripts||{},!window.Demandbase._loadedScripts[e])){window.Demandbase._loadedScripts[e]=!0;var t=document.createElement("script"),i=document.getElementsByTagName("script")[0];t.async=!0,t.id=n||"",t.src="https://"+e.replace(/(^\/\/)|(^http:\/\/)|(^https:\/\/)/,""),i.parentNode.insertBefore(t,i)}}function a(e){for(var n in e){var t=e[n];if("object"==typeof t&&null!==t&&e.hasOwnProperty(n)){for(var i in t)e[n+"_"+i]=t[i];delete e[n]}}return e}function o(e){return e?"#"+e.replace(/(:|\.|\[|\]|,)/g,"\\$1"):null}function s(e,n){function t(e){return 0===e.indexOf("//")?e.substring("//".length,e.length):e.replace(/^.*?:\/\//g,"")}function i(e){return e.replace(/^(www\.)/g,"")}function a(e){return-1!==e.indexOf(o,e.length-o.length)&&(e=e.substring(0,e.length-1)),-1!==e.indexOf("/",e.length-"/".length)&&(e=e.substring(0,e.length-1)),e}var o="#",s=document.location.hash,r=document.location.search,d=document.location.href;if(window.Demandbase.Config.isInIFrame&&(d=document.referrer),n){var l=n.indexOf(o);-1===l&&(l=n.length),s=n.substring(n.indexOf(o),n.length),r=n.substring(n.indexOf("?"),l),d=n}return e=t(e),e=i(e),e=a(e),d=t(d),d=i(d),d=a(d),-1===e.indexOf(o)&&-1!==d.indexOf(o)&&(d=d.substring(0,d.length-s.length)),-1===e.indexOf("?")&&-1!==d.indexOf("?")&&(d=d.substring(0,d.length-r.length)),(d=a(d))===e}function r(e,n){var t={city:"registry_city",state:"registry_state",zip:"registry_zip_code",country:"registry_country_code",country_name:"registry_country",latitude:"registry_latitude",longitude:"registry_longitude"},i=window.Demandbase.Config.nonCompanyDefault||window.Demandbase.utils.tokens.DFLT_NON_COMPANY,a=window.Demandbase.Config.emptyWatchDefault||window.Demandbase.utils.tokens.DFLT_AW_EMPTY,o=t[n]||"",s=e[n]||e[o]||i,r=(e.company_name||i)!==i,d=Object.keys(e).some(function(e){return 0===e.indexOf("watch_list_")});return!1===e[n]?"false":(-1!==n.indexOf("watch_list_")&&r&&(d||(a=window.Demandbase.Config.nonWatchDefault||window.Demandbase.utils.tokens.DFLT_NON_AW),s=e[n]||a),s)}function d(e){var n={},t=window.location.search.substring(1),i=t.split("&");if(!t)return"";for(var a=0;a<i.length;a++){var o=i[a].split("="),s=o[0],r=o[1];n[s]=r}return n[e]||""}function l(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];for(var i=e,a=0,o=n;a<o.length;a++){var s=o[a];if(void 0===i)return;i="function"==typeof s?s(i):i[s]}return i}function u(e,n,t){e.addEventListener?e.addEventListener(n,t):e.attachEvent&&e.attachEvent(n,t)}function c(){return document.readyState}e.getElementByIdOrName=n,e.detectIFrame=t,e.insertScript=i,e.flatten=a,e.jqid=o,e.isCurrentPage=s,e.getAttributeValue=r,e.getQueryParam=d,e.dig=l,e.addEventListener=u,e.getDocumentReadyState=c}(e.Utilities||(e.Utilities={}))}(Demandbase||(Demandbase={})),function(e){e.Demandbase.utils=e.Demandbase.utils||{},Object.assign(e.Demandbase.utils,e.Demandbase.utils,Demandbase.Utilities),Object.assign(e.Demandbase.utils,e.Demandbase.utils,{loadScript:Demandbase.Utilities.insertScript,flattenData:Demandbase.Utilities.flatten,getAttrValue:Demandbase.Utilities.getAttributeValue})}(window);var Demandbase;!function(e){var n=function(){function e(){}return e.prototype.isEnabled=function(){return this.configuration.enabled},e}();e.BaseModule=n}(Demandbase||(Demandbase={}));var Demandbase;!function(e){var n=function(e){function n(){var n=e.call(this)||this;return n.ADVERTISING_PIXEL_ID="ad",n.CONVERSION_PIXEL_ID="cn",n.RETARGETING_PIXEL_ID="rt",n.DEFAULT_CONFIGURATION={enabled:!0,key:null,reportingOnly:!1,campaigns:[],pixels:{ad:null,rt:null,cn:null},conversionTriggers:{pages:[],events:{}}},n.configuration={},n.trackConversion=n.trackConversionListener,n.load=n.initialize,n.loadPixels=n.insertPixels,n._loadPixel=n.insertPixel,n._setCampaign=n.loadCampaign,n._setEvents=n.registerEvents,Object.assign(n.configuration,n.DEFAULT_CONFIGURATION,window.Demandbase.Config.Advertising),Object.assign(n.configuration,n.configuration,window.Demandbase.Config.ads),n}return __extends(n,e),n.prototype.initialize=function(){this.loadCampaign(),this.insertPixels(),this.registerEvents(),!0===this.configuration.reportingOnly&&this.configuration.key&&this.configuration.key!==window.Demandbase.IP.key&&window.Demandbase.IP.load(this.configuration.key,!1)},n.prototype.isConversionPage=function(){for(var e=this.configuration.conversionTriggers.pages,n=0;n<e.length;n++){var t=e[n];if(window.Demandbase.utils.isCurrentPage(t))return!0}return!1},n.prototype.insertPixels=function(){this.insertPixel(this.ADVERTISING_PIXEL_ID),this.isConversionPage()?this.insertPixel(this.CONVERSION_PIXEL_ID):this.insertPixel(this.RETARGETING_PIXEL_ID)},n.prototype.insertPixel=function(e){var n=this.configuration.pixels[e];if(n){var t=document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0],i=document.createElement("img");i.setAttribute("style","display:none"),i.setAttribute("alt","Demandbase pixel"),i.id="db_pixel_"+e,i.src=window.Demandbase.utils.tokens.PROTOCOL+window.Demandbase.utils.tokens.URL_AD_PIXEL+n+"&page="+window.Demandbase.utils.tokens.URL_CURRENT,t.appendChild(i)}},n.prototype.loadCampaign=function(){for(var e=this.configuration.campaigns,n=0;n<e.length;n++)for(var t=e[n],i=0;i<t.pages.length;i++){var a=t.pages[i];if(window.Demandbase.utils.isCurrentPage(a))return this.configuration.pixels=t.pixels,void(this.configuration.conversionTriggers=t.conversionTriggers)}},n.prototype.registerEvents=function(){var e=this.configuration.conversionTriggers.events;for(var n in e)if(e.hasOwnProperty(n)){var t=e[n];t.listener||(t.trackConversion?t.listener=this.trackConversionListener:t.virtualPageview&&(t.listener=this.virtualPageViewListener)),window.Demandbase.utils.events.add(t)}},n.prototype.trackConversionListener=function(){window.Demandbase.Advertising.insertPixel(window.Demandbase.Advertising.CONVERSION_PIXEL_ID)},n.prototype.virtualPageViewListener=function(){window.Demandbase.Advertising.insertPixels(),window.Demandbase.IP.load(void 0,!1)},n}(e.BaseModule);e.AdvertisingModule=n}(Demandbase||(Demandbase={}));var Demandbase;!function(e){var n=function(n){function t(){var e=n.call(this)||this;return e.DEFAULT_CONFIGURATION={enabled:!0},e.configuration={},e.mods={},Object.assign(e.configuration,e.DEFAULT_CONFIGURATION,window.Demandbase.Config.Content),Object.assign(e.configuration,window.Demandbase.Config.content),e}return __extends(t,n),t.prototype.initialize=function(){e.Utilities.Callbacks.registerCallback(this.callback.bind(this)),this.setup()},t.prototype.callback=function(){this.setup(),this.modify()},t.prototype.setup=function(){if(void 0!==window.Demandbase.Config.content)for(var e in window.Demandbase.Config.content){var n=window.Demandbase.Config.content[e],t=window.Demandbase.DBContentBuilder.build(n);t&&(this.mods[t.name]=t)}},t.prototype.modify=function(){var n=this;return e.ErrorReporter.wrap(function(){for(var e in n.mods)if(n.mods.hasOwnProperty(e)){var t=n.mods[e],i=t.run();i&&!0}})()},t}(e.BaseModule);e.ContentModule=n}(Demandbase||(Demandbase={}));var Demandbase;!function(e){var n=function(n){function t(){var e=n.call(this)||this;return e.VERSION="0.0.0",e.PROJECT_ID="141580",e.PROJECT_KEY="9a0a3519e930259f5886a7af53b0ccaa",e.DEFAULT_CONFIGURATION={environment:"production"},e.configuration={},Object.assign(e.configuration,e.DEFAULT_CONFIGURATION,window.Demandbase.Config.ErrorReporter),e}return __extends(t,n),t.prototype.initialize=function(){},t.prototype.send=function(e){var n=new XMLHttpRequest,t="https://airbrake.io/api/v3/projects/"+this.PROJECT_ID+"/notices?key="+this.PROJECT_KEY;try{n.open("POST",t,!0),n.setRequestHeader("Content-type","application/json"),n.send(this.formatMessage(e))}catch(e){}},t.prototype.wrap=function(n){var t=this;if("function"!=typeof n)throw new Error("Invalid Function: "+n);return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];try{return n.apply(t,i)}catch(n){t.send(n),e.Utilities.Logging.alert("Error: "+n+"\n"+n.stack)}}},t.prototype.formatMessage=function(e){return JSON.stringify({errors:[this.parseError(e)],context:this.parseContext(),environment:this.parseEnviroment(),session:this.parseSession(),params:this.parseParams()})},t.prototype.parseError=function(n){return{type:n.name,message:n.message,backtrace:e.Utilities.ErrorStackParser.parse(n)}},t.prototype.parseContext=function(){return{notifier:{name:"ErrorReporterModule",version:this.VERSION},environment:this.configuration.environment,version:window.Demandbase.version,url:window.location.href,userAgent:navigator.userAgent,rootDirectory:window.location.origin}},t.prototype.parseEnviroment=function(){return{config:window.Demandbase.Config}},t.prototype.parseSession=function(){return{companyProfile:e.Utilities.dig(e,"IP","CompanyProfile")}},t.prototype.parseParams=function(){return{}},t}(e.BaseModule);e.ErrorReporterModule=n}(Demandbase||(Demandbase={}));var Demandbase;!function(e){var n=function(n){function t(){var t=n.call(this)||this;return t.ORIGIN="//b.company-target.com",t.DEFAULT_CONFIGURATION={enabled:!0},t.configuration={},t.values={gpid:void 0,cid:void 0,sid:void 0,ip:void 0,impid:void 0,dmps:void 0},Object.assign(t.configuration,t.DEFAULT_CONFIGURATION,e.Config.ExtendedCompanyTargeting),void 0!==e.Config.disableEctModule&&(t.configuration.enabled=!e.Config.disableEctModule),t}return __extends(t,n),t.prototype.isEnabled=function(){return n.prototype.isEnabled.call(this)&&this.isLocalStorageEnabled()},t.prototype.initialize=function(){this.read()},t.prototype.isLocalStorageEnabled=function(){try{return localStorage.setItem("LOCAL_STORAGE_CHECK","LOCAL_STORAGE_CHECK"),localStorage.removeItem("LOCAL_STORAGE_CHECK"),!0}catch(e){return!1}},t.prototype.loadIFrame=function(){switch(e.Utilities.addEventListener(window,"message",e.ErrorReporter.wrap(this.iFrameCallback.bind(this))),e.Utilities.getDocumentReadyState()){case"uninitialized":case"loading":case"loaded":e.Utilities.addEventListener(window,"DOMContentLoaded",e.ErrorReporter.wrap(this.appendIFrame.bind(this)));break;case"interactive":case"complete":default:this.appendIFrame()}},t.prototype.appendIFrame=function(){if(!document.getElementById("db_ect")){var e=document.createElement("iframe");e.src=document.location.protocol+this.ORIGIN+"/ect.html",e.id="db_ect",e.height="0",e.width="0",e.style.display="none",document.body.appendChild(e)}},t.prototype.iFrameCallback=function(n){0===n.origin.indexOf(document.location.protocol+this.ORIGIN)&&(e.Utilities.DataStorage.update({ssid:n.data.ssid,tuuid:n.data.tuuid}),this.read())},t.prototype.read=function(){var n=e.Utilities.DataStorage.fetch();(!n.isStale()&&n.ssid&&n.tuuid||(this.loadIFrame(),n.ssid||n.tuuid))&&(this.parse(n.ssid,n.tuuid),e.IpApi.getOnce())},t.prototype.parse=function(e,n){if(e){var t={gpid:0,cid:1,sid:2,ip:3,dmps:4},i=e.split("-");this.values.gpid=i[t.gpid],this.values.cid=i[t.cid],this.values.sid=i[t.sid],this.values.ip=i[t.ip],this.values.dmps=i[t.dmps]}n&&(this.values.impid=n)},t.prototype.buildParamString=function(){var n={};return(this.values.gpid||this.values.cid||this.values.dmps||this.values.ip||this.values.sid)&&Object.assign(n,{gpid:this.values.gpid||"",cid:this.values.cid||"",dmps:this.values.dmps||"",tip:this.values.ip||"",tsid:this.values.sid||""}),this.values.impid&&(n.impid=this.values.impid),e.Utilities.Api.buildQueryString(n).replace("?","&")},t}(e.BaseModule);e.ExtendedCompanyTargetingModule=n}(Demandbase||(Demandbase={}));var Demandbase;!function(e){var n=function(n){function t(){var t=n.call(this)||this;return t.REMOTE_MODULE_URL="scripts.demandbase.com/forms.min.js",t.DEFAULT_CONFIGURATION={enabled:void 0,emailID:null,emailFields:[]},t.configuration={},t.inserted=!1,Object.assign(t.configuration,t.DEFAULT_CONFIGURATION,e.Config.Forms),void 0===t.configuration.enabled&&void 0!==e.Config.Forms&&(t.configuration.enabled=!0),Object.assign(t.configuration,t.configuration,e.Config.forms),void 0===t.configuration.enabled&&void 0!==e.Config.forms&&(t.configuration.enabled=!0),t}return __extends(t,n),t.prototype.initialize=function(){e.Utilities.Callbacks.registerCallback(this.whenReady.bind(this))},t.prototype.whenReady=function(){this.isMktoForms2Installed()?window.MktoForms2.whenReady(e.ErrorReporter.wrap(this.load.bind(this))):this.load()},t.prototype.load=function(){var n=!1;(n="function"==typeof e.Config.isFormPage?e.Config.isFormPage():this.isFormPage())&&!this.inserted&&this.insertForms()},t.prototype.isFormPage=function(){var n=this.configuration.emailFields;this.configuration.emailID&&n.push(this.configuration.emailID);for(var t=0;t<n.length;t++)if(e.Utilities.getElementByIdOrName(n[t]))return!0;return!1},t.prototype.isMktoForms2Installed=function(){return void 0!==window.MktoForms2&&void 0!==window.MktoForms2.whenReady},t.prototype.insertForms=function(){this.inserted=!0,window.Demandbase.Connectors.initWebForm=this.initializeWebForm,e.Utilities.insertScript(e.FormsLoader.REMOTE_MODULE_URL,"db_form_module")},t.prototype.initializeWebForm=function(n){n=n||e.Config.forms||e.Config.Forms||{},window.Demandbase.Connectors.WebForm.connect(n)},t}(e.BaseModule);e.FormsLoaderModule=n}(Demandbase||(Demandbase={}));var Demandbase;!function(e){var n=function(n){function t(){var e=n.call(this)||this;return e.DEFAULT_CONFIGURATION={enabled:!0,events:null,fieldMap:null,googleAnalyticsClassicScope:2,trackerName:null},e.configuration={},e.gType="",e._cEvent=e.sendEvent,Object.assign(e.configuration,e.DEFAULT_CONFIGURATION,window.Demandbase.Config.Google_Analytics),Object.assign(e.configuration,e.configuration,window.Demandbase.Config.analytics),e}return __extends(t,n),t.prototype.initialize=function(){this.configuration.fieldMap&&e.Utilities.Callbacks.registerCallback(this.callback.bind(this)),this._setEvents()},t.prototype.sendEvent=function(n,t,i){"ga"===this.gType?this._trackEvent(n,t,i):window.ga(function(){window.Demandbase.Connectors.Google_Analytics._sendEvent(n,t,i)}),e.Utilities.Logging.log("Sent Custom Event:"+n+"/"+t+"/"+i)},t.prototype._setTrackerName=function(){var e=this;if(!this.configuration.trackerName)if(void 0!==window._gat&&"function"==typeof window._gat._getTrackers){var n=_gat._getTrackers();if(n.length>0){var t=n[0],i=t._getName()||"";this.configuration.trackerName=i}}else window.ga(function(){var n=window.ga.getAll()||[];if(n.length>0){var t=n[0],i=t.get("name")||"";e.configuration.trackerName=i}})},t.prototype.callback=function(e){try{if(!e)throw new Error("Error - no data passed to callback");var n=window.Demandbase.Connectors.Google_Analytics;n._detectG(),n._setTrackerName();for(var t in n.configuration.fieldMap)if(n.configuration.fieldMap.hasOwnProperty(t)){var i=t,a=n.configuration.fieldMap[t],o=window.Demandbase.utils.getAttrValue(e,a);n._var(i,a,o.toString())}n.sendEvent("Demandbase","API Resolution","IP API")}catch(e){window.Demandbase.utils.alert("GA Error: "+e+"\n"+e.stack),window.Demandbase.Connectors.Google_Analytics.sendEvent("Demandbase","API Resolution","Callback Error")}},t.prototype._detectG=function(){window._gaq?(this.gType="ga",_gaq.push(["_addDevId","NE7T9"])):this.gType=null,this._setGaObject(),window.ga(function(){window.Demandbase.Connectors.Google_Analytics.gType="ua"}),e.Utilities.Logging.log("Detected Google version: "+this.gType)},t.prototype._sendEvent=function(e,n,t){var i=this.configuration.trackerName?this.configuration.trackerName+".send":"send";window.ga(i,"event",{eventCategory:e,eventAction:n,eventLabel:t,nonInteraction:!0})},t.prototype._setCustomDimension=function(e,n){var t=this.configuration.trackerName?this.configuration.trackerName+".set":"set";window.ga(t,"dimension"+e,n)},t.prototype._setCustomVariable=function(e,n,t){var i=this.configuration.trackerName?this.configuration.trackerName+"._setCustomVar":"_setCustomVar",a=this.configuration.googleAnalyticsClassicScope||2;window._gaq.push([i,e>>0,n,t,a])},t.prototype._setEvents=function(){var n=this.configuration.events||[];if(n){var t=window.Demandbase.utils;for(var i in n)if(n.hasOwnProperty(i)){var a=n[i];if(a.data){var o=a.data.category||"",s=a.data.action||"",r=a.data.label||"";void 0===a.listener&&o&&s&&r?a.listener=function(){window.Demandbase.Connectors.Google_Analytics.sendEvent(o,s,r),e.Utilities.Logging.log("Event listener ran")}:o&&s&&r||e.Utilities.Logging.log("Need to define a custom listener function or set data with category/action/label")}t.events.add(a)}}},t.prototype._setGaObject=function(){void 0===window.ga&&(window.GoogleAnalyticsObject="ga",window.ga=window.ga||function(){(window.ga.q=window.ga.q||[]).push(arguments)},window.ga.l=+new Date)},t.prototype._trackEvent=function(e,n,t){var i=this.configuration.trackerName?this.configuration.trackerName+"._trackEvent":"_trackEvent";window._gaq.push([i,e,n,t,0,1])},t.prototype._var=function(n,t,i){"ga"===this.gType?this._setCustomVariable(n,t,i):window.ga(function(){window.Demandbase.Connectors.Google_Analytics._setCustomDimension(n,i)}),e.Utilities.Logging.log(n+" "+t+" : "+i)},t}(e.BaseModule);e.Google_AnalyticsModule=n}(Demandbase||(Demandbase={}));var Demandbase;!function(e){var n=function(n){function t(){var e=n.call(this)||this;return e.DEFAULT_CONFIGURATION={enabled:!0},e.configuration={},Object.assign(e.configuration,e.DEFAULT_CONFIGURATION,window.Demandbase.Config.Google_TagManager),e}return __extends(t,n),t.prototype.initialize=function(){e.Utilities.Callbacks.registerCallback(this.callback.bind(this))},t.prototype.callback=function(n){e.Connectors.Google_TagManager.pushToDataLayer(n)},t.prototype.pushToDataLayer=function(n,t){if(!window.google_tag_manager||!window.dataLayer||"function"!=typeof dataLayer.push)return!1;var i=t?"_"+t:"";return dataLayer.push(n),dataLayer.push({event:"Demandbase_Loaded"+i}),e.Utilities.Logging.log("Pushed to GTM dataLayer"),!0},t}(e.BaseModule);e.Google_TagManagerModule=n}(Demandbase||(Demandbase={}));var Demandbase;if(function(e){var n=function(n){function t(){var t=n.call(this)||this;return t.TEST_MODE_ENABLED="db_useTestIp",t.TEST_MODE_VALUE="db_ip",t.API_ENDPOINT="api.demandbase.com/api/v2/ip.json",t.DEFAULT_CONFIGURATION={apiKey:null,testModeEnabled:!1,testModeValue:null},t.configuration={},t.key=t.configuration.apiKey,
t.useTestValue=t.configuration.testModeEnabled,t.testValue=t.configuration.testModeValue,t.load=t.get,t._loadOnce=t.getOnce,t.CompanyProfile=void 0,t.isCalled=!1,Object.assign(t.configuration,t.DEFAULT_CONFIGURATION,{apiKey:e.Config.key||e.Utilities.dig(e.Config,"analytics","key")||e.Utilities.dig(e.Config,"ads","key")||e.Utilities.dig(e.Config,"forms","key"),testModeEnabled:e.Utilities.getQueryParam(t.TEST_MODE_ENABLED)||e.Config.useTestIp,testModeValue:e.Utilities.getQueryParam(t.TEST_MODE_VALUE)||e.Config.testIp}),t}return __extends(t,n),t.prototype.initialize=function(){},t.prototype.get=function(n,t){var i=this;void 0===n&&(n=void 0),void 0===t&&(t=!0);var a=new XMLHttpRequest,o={key:n||this.configuration.apiKey,query:this.fetchIpAddress()};if(!o.key)return e.Utilities.Logging.log("IP API query cancelled - check auth key.");t&&(a.onreadystatechange=e.ErrorReporter.wrap(function(){i.responseHandler(a)}));try{a.open("GET","https://"+e.Utilities.Api.buildApiUrl(this.API_ENDPOINT,o)),a.send()}catch(e){throw 0===a.status?new Error("IP API Request Blocked"):e}},t.prototype.getOnce=function(){if(this.isCalled)return void e.Utilities.Logging.log("IP API call blocked (already called, wait for callback)");this.isCalled=!0,this.get()},t.prototype.fetchIpAddress=function(){return this.configuration.testModeEnabled?this.configuration.testModeValue:e.ExtendedCompanyTargeting.values.ip?e.ExtendedCompanyTargeting.values.ip:void 0},t.prototype.responseHandler=function(n){if(4===n.readyState&&200===n.status){var t=JSON.parse(n.responseText);this.CompanyProfile=e.Utilities.flatten(t),e.Utilities.Callbacks.callback(this.CompanyProfile)}},t}(e.BaseModule);e.IpApiModule=n}(Demandbase||(Demandbase={})),window.Demandbase.Domain={name:"Demandbase Domain API Wrapper",key:window.Demandbase.Config.key||window.Demandbase.Config.analytics.key||window.Demandbase.Config.ads.key||window.Demandbase.Config.forms.key||window.Demandbase.utils.tokens.ERR_NO_AUTH_KEY,CompanyProfile:null,useTestValue:window.Demandbase.utils.getQueryParam(window.Demandbase.utils.tokens.QS_USE_TEST_DOMAIN)||window.Demandbase.Config.useTestDomain||!1,testValue:window.Demandbase.utils.getQueryParam(window.Demandbase.utils.tokens.QS_QUERY_DOMAIN)||window.Demandbase.Config.testDomain||"No Test Domain Set",_callback:function(e){if(!e.domain&&!e.person)return void Demandbase.Utilities.Logging.log("Demandbase.Domain: No company profile available for domain: "+this.getDomain());e=e.domain||e.person;Demandbase.Utilities.flatten(e);this.CompanyProfile=e},load:function(){if("function"==typeof window.Demandbase.Config.getDomain&&void 0!==this.key){var e="",n={};e=this.useTestValue?this.testValue:this.getDomain(),n={key:this.key,callback:"Demandbase.Domain._callback",query:e},Demandbase.Utilities.Logging.log("Calling Domain API..."),Demandbase.Utilities.insertScript(Demandbase.Utilities.Api.buildApiUrl(Demandbase.Utilities.Constants.URL_DOMAIN_API,n),"db_domain_api")}else Demandbase.Utilities.Logging.log("Domain API query cancelled - check auth key or Config.getDomain")},getDomain:function(e){return this.useTestValue?this.testValue:"function"==typeof window.Demandbase.Config.getDomain?window.Demandbase.Config.getDomain.call(window.Demandbase.Config):(Demandbase.Utilities.Logging.log("Warning: Config.getDomain fcn not defined."),"getDomain function is not defined")}},void 0===window.__db)var __db={segments:null,conditions:null};window.Demandbase.DBCondition=function(e,n,t,i,a){this.name=e,this.attributeValue=n,this.operator=t,this.value=i,this.attributeName=a,this._checkValue=function(e){switch(t){case"equals":return this.attributeValue==e;case"not equals":return this.attributeValue!==e;case"contains":return-1!==this.attributeValue.indexOf(e);default:return!1}},this.evaluate=function(){if(t=this.operator.toLowerCase(),t=window.Demandbase.DBCondition.prototype.supportedOperators[t],"object"==typeof this.value){for(var e in this.value)if(!0===this._checkValue(this.value[e]))return!0;return!1}return this._checkValue(this.value)}},window.Demandbase.DBCondition.prototype.name="DBCondition",window.Demandbase.DBCondition.prototype.supportedOperators={"=":"equals","==":"equals",equal:"equals",equals:"equals","!=":"not equals","!==":"not equals","not equal":"not equals","not equals":"not equals",contains:"contains",contain:"contains"},window.Demandbase.DBConditionBuilder={isValid:function(e){for(var n=["name","attributeValue","operator","value","attributeName"],t=0;t<n.length;t++)if(void 0===e[n[t]])return!1;return!0},build:function(e,n){if(void 0!==e.constructor.prototype.name&&"DBCondition"===e.constructor.prototype.name)return e;if(e.attributeName||(e.attributeName=e.attribute||"NO_ATTR_SET"),e.attributeValue=n[e.attribute]||"",!this.isValid(e))return null;var t=e.name,i=e.attributeValue,a=e.operator,o=e.value,s=e.attributeName;return new window.Demandbase.DBCondition(t,i,a,o,s)}};var DBSegment=function(e,n){this.name=e,this.rules=[],this.operator="",this.addCondition=function(e){if(!(e&&e.evaluate||void 0!==e.constructor.prototype.name&&"DBCondition"===e.constructor.prototype.name)){var e=window.Demandbase.DBConditionBuilder.build(e,window.Demandbase.Segments.CompanyProfile);if(!e)throw new Error("Invalid Condition: "+e.name);Demandbase.Utilities.Logging.log("DBSegmentBuilder converted condition successfully...")}switch(this.rules.push(e),this.operator||DBSegment.prototype.supportedOperators.any){case"and":return this.value=this.value&&e.evaluate();case"or":return this.value=this.value||e.evaluate();default:return e.evaluate()}},this.value=this.addCondition(n)};DBSegment.prototype.name="DBSegment",DBSegment.prototype.supportedOperators={"&&":"and","&":"and",and:"and","||":"or","|":"or",or:"or",any:"or",all:"and"},window.Demandbase.DBSegmentBuilder={isValid:function(e){for(var n=["name","operator","rules"],t=0;t<n.length;t++)if(void 0===e[n[t]])return!1;return"Array"===e.rules.constructor.name},build:function(e){if(!this.isValid(e))return null;var n,t=e.name,i=e.rules[0],a=e.operator;if(i){if(n=new DBSegment(t,i),n.operator=DBSegment.prototype.supportedOperators[a]||DBSegment.prototype.supportedOperators.any,e.rules.length>1)for(var o=1;o<e.rules.length;o+=1){var i=e.rules[o];if(void 0===i.constructor.prototype.name||"DBCondition"!==i.constructor.prototype.name){var s=window.Demandbase.DBConditionBuilder.build(i,void 0);s&&(i=s)}n.addCondition(i)}return n}}},window.Demandbase.Segments=window.Demandbase.Segments||{name:"Demandbase Segments",CompanyProfile:null,AccountWatchVisitor:!1,IsCompany:!1,version:"1.2.2",_debug:!1,_allConditions:[],_allSegments:[],_isInitialized:!1,_setup:function(){this._isInitialized&&this._reset(),this.CompanyProfile||!window.Demandbase.IP&&!window.Demandbase.Domain||(this.CompanyProfile=window.Demandbase.IP.CompanyProfile||window.Demandbase.Domain.CompanyProfile||{}),"Detailed"===this.CompanyProfile.information_level&&(this.IsCompany=!0);for(var e in this.CompanyProfile)this.CompanyProfile.hasOwnProperty(e)&&0===e.indexOf("watch_list_")&&(this.AccountWatchVisitor=!0);for(var n in this._allConditions)this._allConditions.hasOwnProperty(n)&&this._allConditions[n]&&(void 0===this._allConditions[n].constructor.prototype.name||"DBCondition"!==this._allConditions[n].constructor.prototype.name)&&this.add("condition",this._allConditions[n]);for(var t in this._allSegments)this._allSegments.hasOwnProperty(t)&&this._allSegments[t].name&&(void 0===this._allSegments[t].constructor.prototype.name||"DBSegment"!==this._allSegments[t].constructor.prototype.name)&&this.add("segment",this._allSegments[t])},_reset:function(){this._allConditions=window.Demandbase.Config.conditions||__db.conditions||[],this._allSegments=window.Demandbase.Config.segments||__db.segments||[]},load:function(){Demandbase.Utilities.Callbacks.registerCallback(this.init.bind(this))},init:function(e){window.Demandbase.Segments._debug=Demandbase.Utilities.Logging.debug||!1,window.Demandbase.Segments._allConditions=Demandbase.Config.conditions||__db.conditions||[],window.Demandbase.Segments._allSegments=Demandbase.Config.segments||__db.segments||[];var n=window.Demandbase.Segments;n.CompanyProfile=e,n._setup(),n._isInitialized=!0},getActiveSegments:function(){var e=[];for(var n in this._allSegments)this._allSegments.hasOwnProperty(n)&&this._allSegments[n].value&&e.push(this._allSegments[n]);return e},getInactiveSegments:function(){var e=[];for(var n in this._allSegments)this._allSegments.hasOwnProperty(n)&&(this._allSegments[n].value||e.push(this._allSegments[n]));return e},add:function(e,n){if(!e||!n||n=={})return Demandbase.Utilities.Logging.log("Demandbase.Segments.add operation failed due to invalid/empty parameters."),null;if("condition"===e){for(var t,i=this._allConditions.length,a=0;a<this._allConditions.length;a++)if(this._allConditions[a].name===n.name){i=a;break}if(t=window.Demandbase.DBConditionBuilder.build(n,this.CompanyProfile),t?this._allConditions[i]=t:Demandbase.Utilities.Logging.log("Invalid Condition (not created) from: "+JSON.stringify(n)),void 0===n.standalone||!1!==n.standalone){var o=n.name;this.add("segment",{name:o,rules:[o],operator:DBSegment.prototype.supportedOperators.any})}}else if("segment"===e){if("segment"!==this.isValid(n))return null;for(var s,r,d=(n.name,this._allSegments.length),l=n.rules||[],u=0;u<this._allSegments.length;u++)if(this._allSegments[u].name===n.name){d=u;break}for(var c=0;c<l.length;c++){var m=l[c];DBSegment.prototype.supportedOperators[m]||(DBSegment.prototype.supportedOperators[m]||(r=this.get("condition",m)),r?l[c]=r:Demandbase.Utilities.Logging.log("Segment: "+n+" uses a Condition ("+l[c]+") that is not defined."))}if(n.rules=l,s=window.Demandbase.DBSegmentBuilder.build(n))if(this._allSegments[d]=s,this.hasOwnProperty(s.name))this[s.name]=s;else try{Object.defineProperty(this,s.name,{value:s.value,writable:!0})}catch(e){window.Demandbase.Segments[s.name]=s.value}else Demandbase.Utilities.Logging.log("Invalid Segment (not created) from: "+JSON.stringify(n))}else Demandbase.Utilities.Logging.log('Invalid "type" parameter ('+e+') passed to "add" function.  Must be "segment" or "condition".')},get:function(e,n){var t=[];if(1===arguments.length&&(n=e),"condition"===e){if(void 0!==n.constructor.prototype.name&&"DBCondition"===n.constructor.prototype.name)return n;t=this._allConditions}else{if(void 0!==n.constructor.prototype.name&&"DBSegment"===n.constructor.prototype.name)return n;t=this._allSegments}for(var i in t)if(this._allConditions[i].name===n)return this._allConditions[i];return DBSegment.prototype.supportedOperators[n]||Demandbase.Utilities.Logging.log('No item with type: "'+e+'" found with name: '+n),null},isValid:function(e){var n,t=["name","rules"],i=["name","attribute","operator","value"];if(!e)return!1;if(void 0!==e.constructor.prototype.name&&"DBSegment"===e.constructor.prototype.name)return"segment";if(void 0!==e.constructor.prototype.name&&"DBCondition"===e.constructor.prototype.name)return"condition";try{if(e.hasOwnProperty("name")&&e.hasOwnProperty("rules")){if("object"==typeof e.rules)return"segment"}else for(var a in t)if(!e.hasOwnProperty(t[a]))return Demandbase.Utilities.Logging.log('Invalid DBSegment definition.  Missing property:"'+t[a]+'"'),!1;if(n)return n;for(var a in i){if(!e.hasOwnProperty(i[a]))return Demandbase.Utilities.Logging.log('Invalid DBCondition definition.  Missing property:"'+i[a]+'"'),!1;n="condition"}return n}catch(e){return Demandbase.ErrorReporter.send(e),!1}}};var Demandbase;!function(e){function n(){if(null==e.Config.isInIFrame&&(e.Config.isInIFrame=e.Utilities.detectIFrame()),e.IpApi=new e.IpApiModule,window.Demandbase.IP=e.IpApi,window.Demandbase.Segments.load(),window.Demandbase.Config.callback&&e.Utilities.Callbacks.registerCallback(window.Demandbase.Config.callback),e.FormsLoader=new e.FormsLoaderModule,e.FormsLoader.isEnabled()&&(e.FormsLoader.initialize(),window.Demandbase.utils.loadFormModule=e.FormsLoader.load.bind(e.FormsLoader),window.Demandbase.utils.isFormPage=e.FormsLoader.isFormPage.bind(e.FormsLoader)),e.Connectors.Google_Analytics=new e.Google_AnalyticsModule,e.Connectors.Google_Analytics.isEnabled()&&e.Connectors.Google_Analytics.initialize(),e.Connectors.Google_TagManager=new e.Google_TagManagerModule,e.Connectors.Google_TagManager.isEnabled()&&e.Connectors.Google_TagManager.initialize(),e.ExtendedCompanyTargeting=new e.ExtendedCompanyTargetingModule,window.Demandbase.utils.ect=e.ExtendedCompanyTargeting,e.utils.ect.isEnabled()?(e.utils.ect.initialize(),setTimeout(function(){e.IpApi.getOnce()},window.Demandbase.Config.ectTimeout||200)):e.IpApi.getOnce(),e.Advertising=new e.AdvertisingModule,window.Demandbase.Ads=e.Advertising,e.Advertising.isEnabled()&&e.Advertising.initialize(),e.Content=new e.ContentModule,e.Content.isEnabled()&&e.Content.initialize(),"function"==typeof window.Demandbase.Config.getDomain){window.Demandbase.Config.getDomain()&&window.Demandbase.Domain.load()}window.Demandbase._isInitialized=!0,"function"==typeof window.Demandbase.Config.onLoad&&window.Demandbase.Config.onLoad.call(window.Demandbase)}e.initialize=n}(Demandbase||(Demandbase={})),window.Demandbase.Config={clientId:"qQQxkRp0",key:"238a3366c6a82ca72b5dc123a7ad40b1",ads:{pixels:{ad:"1421361246",rt:"1421361512",cn:null},key:"b561357daf8504abd0ca9cc239218ae0",reportingOnly:!0},analytics:{fieldMap:null},isFormPage:function(){function e(){return null===window.Demandbase.Config.forms.getFormIndex?(window.Demandbase.Config.isFormPageCounter=window.Demandbase.Config.isFormPageCounter+1,!1):10!==window.Demandbase.Config.isFormPageCounter?(clearInterval(n),!0):void clearInterval(n)}if(Demandbase.utils.loadScript("scripts.demandbase.com/forms.min.js"),"db"!==Demandbase.utils.getQueryParam("forms-mode"))return!1;console.log("test"),window.Demandbase.Config.forms.companyID=document.querySelector("form input[name='id']").length>0?"Form"+document.querySelector("form input[name='id']").val()+"_10":"",window.Demandbase.Config.forms.emailID=document.querySelector("form input[name='id']").length>0?"Form"+document.querySelector("form input[name='id']").val()+"_1":"";try{var n=setInterval(e,50);window.Demandbase.Config.isFormPageCounter=0}catch(e){return window.Demandbase.utils.log(e),Demandbase.utils.isFormPage()}},forms:{getFormIndex:function(){return document.querySelector("form input[name='id']")?document.querySelector("form input[name='id']").value:null},companyID:$("form input[name='id']").length>0?"Form"+$("form input[name='id']").val()+"_10":"",emailID:$("form input[name='id']").length>0?"Form"+$("form input[name='id']").val()+"_1":"",fieldMap:{},autocompleteLabel:"{company_name}<br><span>{street_address}, {city}, {state}</span>",priorityMap:{company:3,ip:2,domain:1},autocompleteCount:35,autocompleteFilters:{country:document.querySelector("form input[name='id']")?"Form"+document.querySelector("form input[name='id']").value+"_14":null,state:document.querySelector("form input[name='id']")?"Form"+document.querySelector("form input[name='id']").value+"_15":null,zip:document.querySelector("form input[name='id']")?"Form"+document.querySelector("form input[name='id']").value+"_16":null},hooks:{init:function(){try{var e=$("form input[name='id']").val()+"_10";window.Demandbase.Connectors.WebForm.djq(e).keyup(function(){if(0===this.value.length){var e=Demandbase.Connectors.WebForm._sourceChecker.sources;e.company.hit&&e.domain.hit&&e.domain.result&&Demandbase.Connectors.WebForm.priorityMap.domain>Demandbase.Connectors.WebForm.priorityMap.ip&&window.Demandbase.Connectors.WebForm.parser(window.Demandbase.Domain.CompanyProfile)}})}catch(e){window.Demandbase.utils.log("something went wrong with init hook "+e.message)}},response:function(e){var n=window.Demandbase.Connectors.WebForm._sourceChecker.sources;e.person?window.Demandbase.Domain.CompanyProfile=e.person:e.pick?(window.Demandbase.Autocomplete={},window.Demandbase.Autocomplete.CompanyProfile=e.pick):n.company.hit&&!n.company.result&&(console.log("testing"),window.Demandbase.Connectors.WebForm._resetFields({}))},after_parse:function(e,n){if("company"==n)try{window.faasSid(e.demandbase_sid),window.faasIndustryCode(e.industry),window.faasEmpRangeCode(e.employee_count),window.faasAddress1(e.street_address),window.faasCity(e.city),window.faasStateCode(e.state),window.faasZipCode(e.zip),window.fassCountryCode(e.country),window.faasBizPhone(e.phone),window.faasAnnualSales(e.annual_sales),window.faasWebsite(e.website),window.faasEmpRangeCode(e.employee_range),window.faasSic(e.sic),window.faasIp(e.ip),window.faasCompany(e.registry_company_name)}catch(e){window.Demandbase.utils.log(e)}},all_hit:function(e,n){try{window.Demandbase.Config.forms.fieldMap&&window.Demandbase.Connectors.WebForm.fieldMap&&(window.Demandbase.Config.forms.fieldMap=window.Demandbase.Connectors.WebForm.fieldMap=fieldMap,window.Demandbase.Connectors.WebForm.fillForm())}catch(e){window.Demandbase.utils.log(e)}}}},conditions:[],segments:[],content:[],demandbase_loaded:function(e,n){},callback:function(e){if(e)try{window.Demandbase.Config.demandbase_loaded.call(window.Demandbase,e)}catch(e){window.Demandbase.utils.log(e)}}},Demandbase.ErrorReporter=new Demandbase.ErrorReporterModule,Demandbase.ErrorReporter.initialize(),Demandbase.ErrorReporter.wrap(Demandbase.initialize.bind(Demandbase))();